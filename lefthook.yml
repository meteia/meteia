pre-push:
  parallel: true
  commands:
    php-cs-fixer:
      glob: "*.{php,tpl}"
      run: php-cs-fixer --config=.php-cs-fixer.php fix --dry-run

pre-commit:
  parallel: true
  commands:
    sort-json:
      glob: "*.json"
      run: sort-json {staged_files} && git add {staged_files}
    alejandra:
      glob: "*.nix"
      run: alejandra --quiet {staged_files} && git add {staged_files}
      exclude: "composer-project.nix"
    php-cs-fixer:
      glob: "*.{php,tpl}"
      run: php-cs-fixer --config=.php-cs-fixer.php fix {staged_files} && git add {staged_files}
